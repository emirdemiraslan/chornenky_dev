sudo: required
dist: trusty
language: node_js
node_js:
- '5'
addons:
  apt:
    sources:
    - ubuntu-toolchain-r-test
    packages:
    - g++-4.8
    - openjdk-7-jdk
    - php5-cli
    - zip
matrix:
  fast_finish: true
cache:
  directories:
  - node_modules
branches:
  except:
  - /^v[0-9]/
before_install:
- npm set progress=false
- npm prune
before_script: npm test
script: npm run prod
env:
  global:
  - CXX=g++-4.8
  - NODE_ENV=development
  - secure: "mztFhTVyzuIbyP+4Ki0+rGm2XFymDdsWGSW6/TVwgt5WpadUR3JoMF1KPjZnVlKOjCbLRntrQmUUaNlaMNFfmdWY/tXKll1QR/fvGIZo5I8fVnec1/fqBcmjvtDE4Nm5L019W70sTxjduayVV/SpUtGUfA6X8aT/6ET6Pr08bf5cGX7ngqcuZhC2z1adtUrO9DUwMq7QcbPX9N35fVEyKsJLUgIutNRhC0UXZirJ4QP6CdTa1Qa81TEC+QXk+nvFDxRyj58nfI1UNRgd8nut9o8eMtfm5r/YYtCLQY6wXIgvWjofWVLDiLnlvgxmqfxPqMrOdGorK01aJY3lz/eL74nllhxOieAqCqJN9Mvrff7zCYqhriggVDi+f/h/5KsSVuHtWEe6Gt34OvOhub+NXO3XwWCQr7ZVTO/hiMpzM8lqW7rtvtsss+0lyFQa+eLjXC5TLuxcFMsXtSSClbVNQvfhCSzF0y5SrEv4cXzVXbZ0qLznBD/ZZ57GxVeoXiMXHHElJ+B7ggcPiht4BPDqanYcjvI/qEnXY8Xb7MEBYvvtWkNRhjfyq+UJyQU2G5K+UpKtEemLhWbysxqnrzyE697s2cmvVEOch9sXHfOX0dxg0BJfW4o8lQjkDnsexrhrDgr6gxfeOPJT8jSBpYieQlToqxU+wMzsiSeGLpE7tqs="
before_deploy:
  - zip -r release.zip ../you_should_probably_change_this/*
  - git config --global user.email "builds@travis-ci.com"
  - git config --global user.name "Travis CI"
  - export GIT_TAG=build-$TRAVIS_BRANCH-$(date -u "+%Y-%m-%d-%H-%M-%S")-$TRAVIS_BUILD_NUMBER
  - git tag $GIT_TAG -a -m "Generated tag from TravisCI build $TRAVIS_BUILD_NUMBER"
  - git push https://${GH_TOKEN}@github.com/$TRAVIS_REPO_SLUG $GIT_TAG
deploy:
  provider: releases
  api_key:
    secure: "mztFhTVyzuIbyP+4Ki0+rGm2XFymDdsWGSW6/TVwgt5WpadUR3JoMF1KPjZnVlKOjCbLRntrQmUUaNlaMNFfmdWY/tXKll1QR/fvGIZo5I8fVnec1/fqBcmjvtDE4Nm5L019W70sTxjduayVV/SpUtGUfA6X8aT/6ET6Pr08bf5cGX7ngqcuZhC2z1adtUrO9DUwMq7QcbPX9N35fVEyKsJLUgIutNRhC0UXZirJ4QP6CdTa1Qa81TEC+QXk+nvFDxRyj58nfI1UNRgd8nut9o8eMtfm5r/YYtCLQY6wXIgvWjofWVLDiLnlvgxmqfxPqMrOdGorK01aJY3lz/eL74nllhxOieAqCqJN9Mvrff7zCYqhriggVDi+f/h/5KsSVuHtWEe6Gt34OvOhub+NXO3XwWCQr7ZVTO/hiMpzM8lqW7rtvtsss+0lyFQa+eLjXC5TLuxcFMsXtSSClbVNQvfhCSzF0y5SrEv4cXzVXbZ0qLznBD/ZZ57GxVeoXiMXHHElJ+B7ggcPiht4BPDqanYcjvI/qEnXY8Xb7MEBYvvtWkNRhjfyq+UJyQU2G5K+UpKtEemLhWbysxqnrzyE697s2cmvVEOch9sXHfOX0dxg0BJfW4o8lQjkDnsexrhrDgr6gxfeOPJT8jSBpYieQlToqxU+wMzsiSeGLpE7tqs="
  file: release.zip
  on:
    repo: medfreeman/wp-theme-starter
    branch: travisci
    tags: false
